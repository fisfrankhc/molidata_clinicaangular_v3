<div class="page-wrapper">
    <div class="content container-fluid">

        <!-- Page Header -->
        <div class="page-header">
            <div class="row">
                <div class="col-sm-12">
                    <ul class="breadcrumb">
                        <li class="breadcrumb-item"><a>DESPACHO </a></li>
                        <li class="breadcrumb-item"><i class="feather icon-chevron-right"></i></li>
                        <li class="breadcrumb-item"><a [routerLink]="ruta.despacho_caja">CAJA </a></li>
                        <li class="breadcrumb-item"><i class="feather icon-chevron-right"></i></li>
                        <li class="breadcrumb-item active">Ventas Pagadas</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card invoices-add-card">
                    <div class="card-body">
                        <form class="invoices-form" [formGroup]="form">
                            <div class="invoices-main-form" style="margin-bottom: 8px; padding-bottom: 0px;">
                                <div formGroupName="clienteDetalle">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="form-heading">
                                                <h4 style="margin-bottom: 10px;">CLIENTE: </h4>
                                            </div>
                                        </div>
                                        <div class="row" style="padding: 0px 20px;">
                                            <div class="col-12 col-md-6 col-xl-3">
                                                <div class="form-group">
                                                    <input type="hidden" formControlName="id">
                                                    <label style="font-weight: 500;">DOCUMENTO DE IDENTIDAD</label>
                                                    <p>{{ form.get('clienteDetalle.documento')?.value }}</p>
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6 col-xl-5">
                                                <div class="form-group">
                                                    <label style="font-weight: 500;">NOMBRE COMPLETO: </label>
                                                    <p>{{ form.get('clienteDetalle.nombrecliente')?.value }}</p>
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6 col-xl-4"
                                                style="place-self: center; text-align: right;">
                                                <a href="javascript:void(0);"
                                                    *ngIf="datosCOMPROBANTES =='No hay resultados' || datosCOMPROBANTES === undefined"
                                                    data-bs-toggle="modal" data-bs-target="#pregunta_emitir"
                                                    class="btn btn-warning"
                                                    style="padding: 8px 30px; margin: 5px; color: white ">EMITIR
                                                    C.P.</a>
                                                <a href="javascript:void(0);"
                                                    *ngIf="datosCOMPROBANTES != 'No hay resultados' && datosCOMPROBANTES != undefined"
                                                    data-bs-toggle="modal" data-bs-target="#pregunta_descargar"
                                                    class="btn btn-success"
                                                    style="padding: 8px 30px; margin: 5px; color: white "> <i
                                                        class="fa-solid fa-download"></i> DESCARGAR
                                                    C.P.</a>
                                                <a href="javascript:void(0);" (click)="generarTICKET()"
                                                    data-bs-toggle="modal" class="btn btn-info"
                                                    style="padding: 8px 30px; margin: 5px; color: white; ">TICKET</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="invoice-add-table" style="padding-top: 0px;">
                                <h4>Lista de compra</h4>
                                <div class="table-responsive">
                                    <table class="table table-striped table-nowrap  mb-0 no-footer add-table-items">
                                        <thead>
                                            <tr style="text-align: center">
                                                <th>#</th>
                                                <th>C&Oacute;DIGO</th>
                                                <th>PRODUCTO</th>
                                                <th>CANTIDAD</th>
                                                <th>PRECIO</th>
                                                <th>DSCTO.</th>
                                                <th>SUBTOTAL (S/.)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="add-row"
                                                *ngFor="let data of datosProductosDetalle, let i = index">
                                                <td style="max-width: 50px;">
                                                    <input class="form-control" value="{{i+1}}"
                                                        style="text-align: center; background-color: transparent;border: 0;"
                                                        readonly>
                                                </td>
                                                <td style="max-width: 150px;">
                                                    <input class="form-control" [value]="data.codigoProducto"
                                                        style="text-align: center; background-color: transparent;border: 0;"
                                                        readonly>
                                                </td>
                                                <td>
                                                    <input type="text" class="form-control"
                                                        [value]="data.nombreProducto"
                                                        style="text-align: center; background-color: transparent;border: 0;"
                                                        readonly>
                                                </td>
                                                <td style="max-width: 100px;">
                                                    <input class="form-control" [value]="data.cantidad_venta"
                                                        style="text-align: center; background-color: transparent;border: 0;"
                                                        readonly>
                                                </td>
                                                <td style="max-width: 110px;">
                                                    <input class="form-control" [value]="data.precio_venta"
                                                        style="text-align: center; background-color: transparent;border: 0;"
                                                        readonly>
                                                </td>
                                                <td style="max-width: 110px;">
                                                    <input class="form-control" [value]="data.descuento"
                                                        style="text-align: center; background-color: transparent;border: 0;"
                                                        readonly>
                                                </td>
                                                <td style="vertical-align: middle;">
                                                    <p style="margin: 0; text-align: right; font-weight: 500;">
                                                        {{calcularSubtotal(data) | number:'1.2-2' }}</p>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="row">
                                <div class="offset-lg-8 col-md-4">
                                    <div class="invoice-total-card">
                                        <div class="invoice-total-box">
                                            <div class="invoice-total-inner">
                                                <p style="margin-bottom: 0; font-weight: 800;     font-size: 18px;">
                                                    TOTAL <span>{{ calcularSubtotalTotal() |
                                                        currency: 'PEN ' }}</span></p>
                                            </div>
                                        </div>
                                    </div><br>
                                    <div class="doctor-submit text-end">
                                        <a class="btn btn-primary cancel-form" [routerLink]="ruta.despacho_caja"
                                            style="margin: 5px;">ATRÁS</a>
                                    </div>
                                </div>
                            </div>
                            <!-- Modal Pregunta de Emitir-->
                            <div class="modal custom-modal fade" id="pregunta_emitir" role="dialog"
                                formGroupName="datoEnvioBoleta">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-body">
                                            <div class="form-header">
                                                <h2>¿Que desea emitir?</h2>
                                                <div class="row">
                                                    <div class="col-auto"
                                                        style="margin: 0 auto; border: 1px solid black; padding: 5px 50px; border-radius: 15px;">
                                                        <div class="form-check"
                                                            style="padding: 10px 0 5px; right: -10px; position: relative;"
                                                            [ngStyle]="obtenerEstilos('BOLETA')">
                                                            <input class="form-check-input" type="radio"
                                                                formControlName="tipoBoleta" id="exampleRadios1"
                                                                value="BOLETA" [(ngModel)]="opcionSeleccionada">
                                                            <label class="form-check-label" for="exampleRadios1"
                                                                style="font-size: 14px;">
                                                                BOLETA ELECTR&Oacute;NICA
                                                            </label>
                                                        </div>
                                                        <div class="form-check"
                                                            style="padding: 5px 0 10px;  right: -10px; position: relative;"
                                                            *ngIf="clienteTipoDocumento === 'RUC'"
                                                            [ngStyle]="obtenerEstilos('FACTURA')">
                                                            <input class="form-check-input" type="radio"
                                                                formControlName="tipoBoleta" id="exampleRadios2"
                                                                value="FACTURA" [(ngModel)]="opcionSeleccionada">
                                                            <label class="form-check-label" for="exampleRadios2"
                                                                style="font-size: 14px;">
                                                                FACTURA ELECTR&Oacute;NICA
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-btn delete-action">
                                                <div class="row">
                                                    <div class="col-auto" style="margin: 0 auto;">
                                                        <a href="javascript:void(0);" data-bs-dismiss="modal"
                                                            class="btn btn-primary paid-cancel-btn">SALIR</a>
                                                    </div>
                                                    <div class="col-6">
                                                        <a href="javascript:void(0);" (click)="emitirComprobante()"
                                                            class="btn btn-primary paid-continue-btn"
                                                            style="width: 100%;">EMITIR</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- /Modal Pregunta de Emitir -->

                            <!-- Modal VER Boleta/Factura -->
                            <div class="modal custom-modal fade" id="pregunta_descargar" role="dialog"
                                formGroupName="datoVerBoleta">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-body">
                                            <div class="form-header">
                                                <h2>¿Que desea observar?</h2>

                                                <div class="accordion accordion-flush" id="accordionFlushExample"
                                                    style="border: 2px solid #2e37a4;">
                                                    <div class="accordion-item">
                                                        <h2 class="accordion-header">
                                                            <button class="accordion-button collapsed" type="button"
                                                                data-bs-toggle="collapse"
                                                                data-bs-target="#flush-collapseOne"
                                                                aria-expanded="false" aria-controls="flush-collapseOne">
                                                                <span style="right: -30%; position: relative;">Boleta
                                                                    Electr&oacute;nica</span>
                                                            </button>
                                                        </h2>
                                                        <div id="flush-collapseOne" class="accordion-collapse collapse"
                                                            data-bs-parent="#accordionFlushExample">
                                                            <div class="accordion-body">
                                                                <div class="row"
                                                                    style="margin: auto; place-content: center; ">
                                                                    <div class="col-auto"
                                                                        style="padding: 10px 5px; border-radius: 10px;"
                                                                        [ngClass]="{'selected-email': form.get('datoVerBoleta.envioOpcion')?.value === 'email'}">
                                                                        <input type="radio" class="form-check-input"
                                                                            formControlName="envioOpcion" value="email"
                                                                            id="emailOption" />
                                                                        <label for="emailOption"> Correo
                                                                            Electr&oacute;nico</label>
                                                                    </div>
                                                                    <div class="col-auto"
                                                                        style="padding: 10px 5px; border-radius: 10px;"
                                                                        [ngClass]="{'selected-whatsapp': form.get('datoVerBoleta.envioOpcion')?.value === 'whatsapp'}">
                                                                        <input type="radio" class="form-check-input"
                                                                            formControlName="envioOpcion"
                                                                            value="whatsapp" id="whatsappOption" />
                                                                        <label for="whatsappOption"> WhatsApp</label>
                                                                    </div>
                                                                </div>
                                                                <div class="row fade-in-out-down"
                                                                    *ngIf="form.get('datoVerBoleta.envioOpcion')?.value === 'email'">
                                                                    <div class="row" style="margin: auto;">
                                                                        <div class="col-12">
                                                                            <label for="validationCustomUsername">Correo
                                                                                al
                                                                                que desea enviar:</label>
                                                                        </div>
                                                                        <div class="col-12 col-lg-9"
                                                                            style="padding-right: 0;">
                                                                            <div class="input-group">
                                                                                <div class="input-group-prepend">
                                                                                    <span class="input-group-text"
                                                                                        id="inputGroupPrepend"><i
                                                                                            class="fa-solid fa-envelope"></i></span>
                                                                                </div>
                                                                                <input type="email"
                                                                                    formControlName="correoBoleta"
                                                                                    style="border-radius: 2px 10px 10px 2px; height: 45px;"
                                                                                    class="form-control"
                                                                                    placeholder="correo@correo.com">
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-12 col-lg-auto"
                                                                            style="align-self: center; padding-left: 0; max-width: 90px;">
                                                                            <a href="javascript:void(0);"
                                                                                (click)="enviarACorreo()"
                                                                                class="btn btn-secondary"
                                                                                style="padding: 7px 20px;">ENVIAR</a>
                                                                        </div>
                                                                        <div class="col-12">
                                                                            <div style="color: red; padding: 5px;font-size: 12px"
                                                                                class="fade-in-out"
                                                                                *ngIf="form.get('datoVerBoleta.correoBoleta')?.hasError('email')">
                                                                                Ingrese un correo electr&oacute;nico
                                                                                v&aacute;lido.
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="row fade-in-out-down"
                                                                    *ngIf="form.get('datoVerBoleta.envioOpcion')?.value === 'whatsapp'">

                                                                    <div class="row" style="margin: auto;">
                                                                        <div class="col-12">
                                                                            <label
                                                                                for="validationCustomUsername">Ingrese
                                                                                un n&uacute;mero: </label>
                                                                        </div>
                                                                        <div class="col-12 col-lg-9"
                                                                            style="padding-right: 0;">
                                                                            <div class="input-group">
                                                                                <div class="input-group-prepend">
                                                                                    <span class="input-group-text"
                                                                                        id="inputGroupPrepend"><i
                                                                                            class="fas fa-phone"></i></span>
                                                                                </div>
                                                                                <input type="text"
                                                                                    formControlName="whatsappBoleta"
                                                                                    style="border-radius: 2px 10px 10px 2px; height: 45px;"
                                                                                    class="form-control" placeholder="">
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-12 col-lg-auto"
                                                                            style="align-self: center; padding-left: 0; max-width: 90px;">
                                                                            <a href="javascript:void(0);"
                                                                                (click)="enviarAWhatsApp()"
                                                                                class="btn btn-secondary"
                                                                                style="padding: 7px 20px;">ENVIAR</a>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                                <br>
                                                                <div class="row">
                                                                    <div class="col-12 col-lg-6">
                                                                        <a href="javascript:void(0);"
                                                                            (click)="generarBOLETAA4()"
                                                                            class="btn btn-outline-primary"
                                                                            style="width: 100%; padding: 10px 20px; margin: 5px;">Formato
                                                                            A4</a>
                                                                    </div>
                                                                    <div class="col-12 col-lg-6">
                                                                        <a href="javascript:void(0);"
                                                                            (click)="generarBOLETATicket()"
                                                                            class="btn btn-outline-secondary"
                                                                            style="width: 100%; padding: 10px 20px; margin: 5px;">Formato
                                                                            Ticket</a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="modal-btn delete-action">
                                                <div class="row">
                                                    <div class="col-auto" style="margin: 0 auto;">
                                                        <a href="javascript:void(0);" data-bs-dismiss="modal"
                                                            class="btn btn-primary paid-cancel-btn">SALIR</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- /Modal Modal VER Boleta/Factura -->

                            <!-- Modal Boleta A4-->
                            <div class="modal custom-modal fade" id="boletaElectronica" role="dialog">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-body">
                                            <div id="boletaA4Emitir" style="text-align: center; ">
                                                <div class="row"
                                                    style="padding-top: 5px; padding-left: 20px; width: 220px; padding-bottom: 5px; padding-right: 5px;">
                                                    <table *ngIf="infoEmpresa && datosCOMPROBANTES">
                                                        <tr>
                                                            <td><img src="assets/img/logo.png" width="20" height="20"
                                                                    alt="" style="position: relative; ">
                                                            </td>
                                                            <td style="width: 180px;">
                                                                <table
                                                                    style=" border: none; align-items: center; text-align: center; width: 100%;">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td
                                                                                style="border: none; font-weight: bold; font-size: 6px; padding-bottom: 0;">
                                                                                {{ infoEmpresa.nombre_comercial }}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td
                                                                                style="border: none; font-weight: bold; font-size: 4.5px; padding-bottom: 0; ">
                                                                                {{ infoEmpresa.razon_social }}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td
                                                                                style="border: none; font-size: 4px; font-style: oblique; padding-bottom: 0;">
                                                                                Dirección: {{
                                                                                infoEmpresa.empresa_direccion
                                                                                }}
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td
                                                                                style="border: none; font-size: 4px; font-style: oblique; padding-bottom: 0;">
                                                                                TELÉFONO: {{
                                                                                infoEmpresa.empresa_telefono }}
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td
                                                                                style="border: none; font-size: 4px; font-style: oblique; padding-bottom: 0;">
                                                                                EMAIL: qara@qara.com.pe</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                            <td style="width: 2px;"></td>
                                                            <td style="width: 105px;">
                                                                <div
                                                                    style="border-radius: 2px; border: 1px solid #000000; padding: 1px 0;">
                                                                    <table
                                                                        style=" border: none; align-items: center; text-align: center; width: 100%; font-size: 3.5px;">
                                                                        <tbody>
                                                                            <tr>
                                                                                <td style="border: none; ">R.U.C. N° {{
                                                                                    infoEmpresa.empresa_ruc }}
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td></td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td
                                                                                    style="border: none; background-color: #c5c5c5;">
                                                                                    BOLETA DE VENTA
                                                                                    ELECTR&Oacute;NICA</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td style="border: none; ">N°
                                                                                    {{
                                                                                    datosCOMPROBANTES.comprobante_serie
                                                                                    }}-{{datosCOMPROBANTES.comprobante_numero}}
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>

                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>
                                                <div class="row" *ngIf="datosCOMPROBANTES"
                                                    style="padding-left: 20px; width: 212px; padding-bottom: 5px;">
                                                    <table style="border: 1px solid #000; font-size: 3.8px;">
                                                        <thead>
                                                            <th></th>
                                                            <th></th>
                                                        </thead>
                                                        <tbody style="text-align: left;">
                                                            <tr>
                                                                <td style="width: 25px;"> &nbsp;CLIENTE</td>
                                                                <td style="letter-spacing: 0.15px">: {{
                                                                    datosCOMPROBANTES.cliente_razon_social }}
                                                                </td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            <tr>
                                                                <td> &nbsp;DIRECCION</td>
                                                                <td>: {{ datosCOMPROBANTES.cliente_direccion
                                                                    }}</td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            <tr>
                                                                <td> &nbsp;{{ datosCOMPROBANTES.cliente_documento_tipo
                                                                    }}</td>
                                                                <td>: {{ datosCOMPROBANTES.cliente_documento_numero }}
                                                                </td>
                                                                <td style="width: 40px;"> &nbsp;FECHA DE EMISION</td>
                                                                <td style="width: 40px;">: {{
                                                                    datosCOMPROBANTES.fecha_emision }}</td>
                                                            </tr>
                                                            <tr>
                                                                <td> &nbsp;CODIGO</td>
                                                                <td>: </td>
                                                                <td> &nbsp;FECHA DE VMTO</td>
                                                                <td>: {{
                                                                    datosCOMPROBANTES.fecha_emision}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td> &nbsp;TELEFONO</td>
                                                                <td>: </td>
                                                                <td> &nbsp;CONDICION PAGO</td>
                                                                <td>: CONTADO</td>
                                                            </tr>
                                                            <tr>
                                                                <td> &nbsp;G/REMISION</td>
                                                                <td>: -</td>
                                                                <td> &nbsp;MONEDA</td>
                                                                <td>: SOLES</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div class="row"
                                                    style="padding-left: 20px; width: 212px; padding-bottom: 5px;">
                                                    <table class="" style="font-size: 4.2px">
                                                        <thead>
                                                            <tr
                                                                style="border-bottom: 1px solid #313131; text-align: center; padding-bottom: 1px;">
                                                                <th>N°</th>
                                                                <th>CANT.</th>
                                                                <th>MED.</th>
                                                                <th>DESCRIPCION</th>
                                                                <th>P. UN.</th>
                                                                <th>IMPORTE</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let data of infoItemsComprobantes, let i = index"
                                                                style="border-bottom: 1px solid #313131;">
                                                                <td style="padding: 0; padding-bottom: 1px;">{{ i+1 }}
                                                                </td>
                                                                <td style="padding: 0; padding-bottom: 1px;">{{
                                                                    data.cantidad_venta }}</td>
                                                                <td style="padding: 0; padding-bottom: 1px;">{{
                                                                    data.medida }}</td>
                                                                <td style="padding: 0; padding-bottom: 1px;">{{
                                                                    data.producto_nombre }}</td>
                                                                <td style="padding: 0; padding-bottom: 1px;">{{
                                                                    data.precio_venta }}</td>
                                                                <td
                                                                    style="padding: 0; padding-bottom: 1px; text-align: right;">
                                                                    {{
                                                                    calcularSubtotalItem(data) | number:'1.2-2' }}</td>
                                                            </tr>
                                                            <br>
                                                            <tr class="textoMonto">
                                                                <td colspan="4"
                                                                    style="padding-top: 0; border: 1px solid #313131;">
                                                                    SON:
                                                                    {{totalEnTextoItem()}}</td>
                                                                <td
                                                                    style="border-top: 1px solid #313131; border-bottom: 1px solid #313131;">
                                                                    TOTAL:</td>
                                                                <td style="border: 1px solid #313131;"><span
                                                                        style="font-weight: bold;">
                                                                        S/.
                                                                        {{calcularTotalItem() |
                                                                        number:'1.2-2'}}</span></td>
                                                            </tr>
                                                            <tr>
                                                                <td>QR</td>
                                                                <td colspan="5">Representaci&oacute;n impresa del
                                                                    comprobante electr&oacute;nico</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div style="padding-left: 10px; width: 212px;">
                                                    <p style="margin-bottom: 0; font-size: 4px;">
                                                        VENDEDOR: {{
                                                        this.usernombre }}</p>
                                                    <p style="margin-bottom: 0; font-size: 4px;">Telefono: </p>
                                                    <p style="margin-bottom: 0; font-size: 4px;">Email: </p>
                                                </div>

                                            </div>
                                            <div class="modal-btn delete-action">
                                                <div class="row">
                                                    <div class="col-6">
                                                        <a href="javascript:void(0);" data-bs-dismiss="modal"
                                                            class="btn btn-primary paid-cancel-btn">Cancelar</a>
                                                    </div>
                                                    <div class="col-6">
                                                        <button type="submit" data-bs-dismiss="modal"
                                                            class="btn btn-primary paid-continue-btn"
                                                            style="width: 100%;">EMITIR</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- /Modal Boleta A4-->
                            <!-- Modal Boleta Ticket -->
                            <div class="modal custom-modal fade" id="ticket" role="dialog">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-body">
                                            <div id="boletaTicketEmitir" style="letter-spacing: 0.012em; width: 74px">
                                                <div *ngIf="infoEmpresa && datosCOMPROBANTES"
                                                    style="text-align: center; padding-top: 2px; font-size: 2px;">
                                                    <img src="assets/img/logo.jpg" width="5px" height="5px" alt="">
                                                    <br><span style="top: -0.6em; position: relative;">{{
                                                        infoEmpresa.nombre_comercial
                                                        }}</span>
                                                    <br><span style="top: -1em; position: relative;">BOLETA DE VENTA
                                                        ELECTRÓNICA</span>
                                                    <br><span
                                                        style="font-weight: bold ; top: -1.2em; position: relative;">{{datosCOMPROBANTES.comprobante_serie}}-{{datosCOMPROBANTES.comprobante_numero}}</span>
                                                    <br><span style="top: -1.4em; position: relative;">{{
                                                        infoEmpresa.razon_social }}</span>
                                                    <br><span style="top: -1.6em; position: relative;">RUC: {{
                                                        infoEmpresa.empresa_ruc }}</span>
                                                    <br><span style="top: -1.8em; position: relative;">{{
                                                        infoEmpresa.empresa_direccion }}</span>
                                                    <br><span style="top: -2em; position: relative;">-</span>
                                                    <br><span style="top: -2.2em; position: relative;">TEL&Eacute;FONO:
                                                        {{ infoEmpresa.empresa_telefono }}</span>
                                                </div>
                                                <div *ngIf="datosCOMPROBANTES"
                                                    style="font-size: 2px; padding: 0 2px; top: -2.2em; position: relative;">
                                                    <table>
                                                        <thead>
                                                            <th></th>
                                                            <th></th>
                                                        </thead>
                                                        <tbody style="text-align: justify;">
                                                            <tr>
                                                                <td style="padding: 0; width: 25px;">FECHA</td>
                                                                <td style="padding: 0;">: 2023-03-29</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="padding: 0;">{{
                                                                    datosCOMPROBANTES.cliente_documento_tipo
                                                                    }}</td>
                                                                <td style="padding: 0;">: {{
                                                                    datosCOMPROBANTES.cliente_documento_numero }}</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="padding: 0;">SEÑOR (A)</td>
                                                                <td style="padding: 0;">: {{
                                                                    datosCOMPROBANTES.cliente_razon_social }}
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td style="padding: 0;">DIRECCION</td>
                                                                <td style="padding: 0;">: {{
                                                                    datosCOMPROBANTES.cliente_direccion }}</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="padding: 0;">FECHA EMISION</td>
                                                                <td style="padding: 0;">: {{
                                                                    datosCOMPROBANTES.fecha_emision }}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div
                                                    style="font-size: 1.7px; padding: 0 2px; top: -1.6em; position: relative; text-align: center;">
                                                    <table style="width: 100%;">
                                                        <thead>
                                                            <th>CANT.</th>
                                                            <th>UM.</th>
                                                            <th>DESCRIPCION</th>
                                                            <th style="width: 10px;">P. UN.</th>
                                                            <th>IMP.</th>
                                                        </thead>
                                                        <tbody>
                                                            <tr
                                                                *ngFor="let data of infoItemsComprobantes, let i = index">
                                                                <td style="padding: 0; letter-spacing: 0.012em;">{{
                                                                    data.cantidad_venta }}</td>
                                                                <td style="padding: 0;">{{ data.medida }}</td>
                                                                <td style="padding: 0;">{{ data.producto_nombre }}</td>
                                                                <td style="padding: 0; letter-spacing: 0.012em;">{{
                                                                    data.precio_venta }}</td>
                                                                <td
                                                                    style="padding: 0; text-align: right; letter-spacing: 0.012em;">
                                                                    {{
                                                                    calcularSubtotalItem(data) | number:'1.2-2' }}</td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="5" style="padding: 0;">
                                                                    TOTAL: <span style="font-weight: bold;">S/.
                                                                        {{calcularTotalItem() |
                                                                        number:'1.2-2'}}</span>
                                                                </td>
                                                            </tr>
                                                            <tr class="textoMonto">
                                                                <td colspan="5" style="padding-top: 0; ">
                                                                    SON:
                                                                    {{totalEnTextoItem()}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div
                                                    style="font-size: 2px; padding: 0 2px; top: -1.4em; position: relative; text-align: center;">
                                                    <p style="margin-bottom: 0;">VENDEDOR: {{ this.usernombre }}</p>
                                                    <p style="margin-bottom: 0;">Telefono: </p>
                                                </div>

                                            </div>
                                            <div class="modal-btn delete-action">
                                                <div class="row">
                                                    <div class="col-6">
                                                        <a href="javascript:void(0);" data-bs-dismiss="modal"
                                                            class="btn btn-primary paid-cancel-btn">Cancelar</a>
                                                    </div>
                                                    <div class="col-6">
                                                        <button type="submit" data-bs-dismiss="modal"
                                                            class="btn btn-primary paid-continue-btn"
                                                            style="width: 100%;">EMITIR</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- /Modal Boleta Ticket -->

                            <!-- Modal Ticket -->
                            <div class="modal custom-modal fade" id="ticket" role="dialog">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-body">
                                            <!-- <div id="ticketEmitir" style="text-align: center; width: 65px">
                                                <div *ngIf="datosEMP">
                                                    <img src="assets/img/logo.png" width="5" height="5" alt="">
                                                    <br><span>{{ datosEMP.nombre_comercial }}</span>
                                                    <br><span>NOTA DE VENTA ELECTRÓNICA</span>
                                                    <br><span style="font-weight: bold;">2023-40</span>
                                                    <br><span>{{ datosEMP.razon_social }}</span>
                                                    <br><span>RUC: {{ datosEMP.empresa_ruc }}</span>
                                                    <br><span>{{ datosEMP.empresa_direccion }}</span>
                                                    <br><br>
                                                    <span>TEL&Eacute;FONO: 964 622 000</span>
                                                    <br><br>
                                                </div>
                                                <div class="row ">
                                                    <table class=""
                                                        style="border-spacing: 0; border-collapse: collapse;">
                                                        <thead>
                                                            <th></th>
                                                            <th></th>
                                                        </thead>
                                                        <tbody style="text-align: justify;">
                                                            <tr>
                                                                <td style="padding: 0;">FECHA</td>
                                                                <td style="padding: 0;">: 2023-03-29</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="padding: 0;">DNI</td>
                                                                <td style="padding: 0;">: {{ form.get('clienteDetalle.documento')?.value }}</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="padding: 0;">SEÑOR (A)</td>
                                                                <td style="padding: 0;">: {{ form.get('clienteDetalle.nombrecliente')?.value }}
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td style="padding: 0;">DIRECCION</td>
                                                                <td style="padding: 0;">: {{ form.get('clienteDetalle.direccioncliente')?.value }}</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="padding: 0;">FECHA EMISION</td>
                                                                <td style="padding: 0;">: 29-03-2023</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <br>
                                                <div class="row">
                                                    <table class="" style="width: 65px;">
                                                        <thead>
                                                            <th>CANT.</th>
                                                            <th>UM.</th>
                                                            <th>DESCRIPCION</th>
                                                            <th>P. UN.</th>
                                                            <th>IMP.</th>
                                                        </thead>
                                                        <tbody>//style="border-bottom: 0.1px #000000;"
                                                            <tr *ngFor="let data of datosProductosDetalle, let i = index">
                                                                <td style="padding: 0;">{{ data.cantidad_venta }}</td>
                                                                <td style="padding: 0;">{{ data.medidaProducto }}</td>
                                                                <td style="padding: 0;">{{ data.nombreProducto }}</td>
                                                                <td style="padding: 0;">{{ data.precio_venta }}</td>
                                                                <td style="padding: 0; text-align: right;">{{ calcularSubtotal(data) | number:'1.2-2' }}</td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="5" style="padding-bottom: 0;">TOTAL: <span style="font-weight: bold;"> S/. {{calcularSubtotalTotal() | number:'1.2-2'}}</span>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="5" style="padding-top: 0;">SON: {{totalEnTexto()}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <p style="margin-bottom: 0;">Nota de venta para canjear con un
                                                    comprobante</p>
                                                <p style="margin-bottom: 0;">VENDEDOR: {{ this.usernombre }}</p>
                                                <p style="margin-bottom: 0;">Telefono: </p>
                                            </div> -->
                                            <div id="ticketEmitir" style="text-align: center">
                                                <div *ngIf="datosEMP">
                                                    <img src="assets/img/logo.png" width="5" height="5" alt="">
                                                    <br><span>{{ datosEMP.nombre_comercial }}</span>
                                                    <br><span>NOTA DE VENTA ELECTRÓNICA</span>
                                                    <br><span style="font-weight: bold;">2023-40</span>
                                                    <br><span>{{ datosEMP.razon_social }}</span>
                                                    <br><span>RUC: {{ datosEMP.empresa_ruc }}</span>
                                                    <br><span>{{ datosEMP.empresa_direccion }}</span>
                                                    <br><br>
                                                    <span>TEL&Eacute;FONO: 964 622 000</span>
                                                    <br><br>
                                                </div>
                                                <div class="row ">
                                                    <table>
                                                        <thead>
                                                            <th></th>
                                                            <th></th>
                                                        </thead>
                                                        <tbody style="text-align: justify;">
                                                            <tr>
                                                                <td style="padding: 0;">FECHA</td>
                                                                <td style="padding: 0;">: 2023-03-29</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="padding: 0;">DNI</td>
                                                                <td style="padding: 0;">: {{
                                                                    form.get('clienteDetalle.documento')?.value }}</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="padding: 0;">SEÑOR (A)</td>
                                                                <td style="padding: 0;">: {{
                                                                    form.get('clienteDetalle.nombrecliente')?.value }}
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td style="padding: 0;">DIRECCION</td>
                                                                <td style="padding: 0;">: {{
                                                                    form.get('clienteDetalle.direccioncliente')?.value
                                                                    }}</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="padding: 0;">FECHA EMISION</td>
                                                                <td style="padding: 0;">: 29-03-2023</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <br>
                                                <div class="row">
                                                    <table class="">
                                                        <thead>
                                                            <th>CANT.</th>
                                                            <th>UM.</th>
                                                            <th>DESCRIPCION</th>
                                                            <th>P. UN.</th>
                                                            <th>IMP.</th>
                                                        </thead>
                                                        <tbody><!-- style="border-bottom: 0.1px #000000;" -->
                                                            <tr
                                                                *ngFor="let data of datosProductosDetalle, let i = index">
                                                                <td style="padding: 0;">{{ data.cantidad_venta }}</td>
                                                                <td style="padding: 0;">{{ data.medidaProducto }}</td>
                                                                <td style="padding: 0;">{{ data.nombreProducto }}</td>
                                                                <td style="padding: 0;">{{ data.precio_venta }}</td>
                                                                <td style="padding: 0; text-align: right;">{{
                                                                    calcularSubtotal(data) | number:'1.2-2' }}</td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="5" style="padding-bottom: 0;">TOTAL: <span
                                                                        style="font-weight: bold;"> S/.
                                                                        {{calcularSubtotalTotal() |
                                                                        number:'1.2-2'}}</span>
                                                                </td>
                                                            </tr>
                                                            <tr class="textoMonto">
                                                                <td colspan="5" style="padding-top: 0">SON:
                                                                    {{totalEnTexto()}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <p style="margin-bottom: 0;">Nota de venta para canjear con un
                                                    comprobante</p>
                                                <p style="margin-bottom: 0;">VENDEDOR: {{ this.usernombre }}</p>
                                                <p style="margin-bottom: 0;">Telefono: </p>
                                            </div>
                                            <div class="modal-btn delete-action">
                                                <div class="row">
                                                    <div class="col-6">
                                                        <a href="javascript:void(0);" data-bs-dismiss="modal"
                                                            class="btn btn-primary paid-cancel-btn">Cancelar</a>
                                                    </div>
                                                    <div class="col-6">
                                                        <button type="submit" data-bs-dismiss="modal"
                                                            class="btn btn-primary paid-continue-btn"
                                                            style="width: 100%;">EMITIR</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- /Modal Ticket -->
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>